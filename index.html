<!DOCTYPE html>
<!--
	Author: Tiago Porto - http://www.tiagoporto.com
	http://tiagoporto.github.io/gerador-cpf/
	Contact: me@tiagoporto.com
 -->
<html lang="pt-br">
	<head>
		<meta charset="UTF-8">
		<title>Gerador e validador de CPF</title>

	</head>
	<body>
		<a href="https://github.com/tiagoporto/gerador-cpf"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

		<button id="btn-gerar-CPF">Gerar CPF</button>
		<p id="CPF"></p>

		<form action="" id="valida-CPF">
			<input id="primeiros-digitos" type="text" pattern="([0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9])" maxlength="9">
			<input id="digitos-verificadores" type="text" pattern="([0-9][0-9])" maxlength="2">
			<button  type="submit">Validar CPF</button>
		</form>
		<script>
			document.getElementById('btn-gerar-CPF').onclick = function geraCPF(){
				var cpf = "";
				var soma1 = null;
				var soma2 = null;

				//Gerando os 9 primeiros digitos do CPF
				for (var i = 0; i < 9; ++i) {
					cpf += Math.floor(Math.random() * 9) + "";
				};

				//Calculando o primeiro dígito verificador
				for (var i = 0; i < 9; ++i) {
					soma1 += cpf.toString().charAt(i)*(10-i);
				};

				var verificador1 = soma1 % 11;


				if (verificador1 < 2) {
					verificador1 = 0;
				}else {
					verificador1 = 11 - verificador1;
				}

				cpf_verificador1 = cpf + "" + verificador1;

				//Calculando o segundo dígito verificador
				for (var i = 0; i < 10; ++i){
					soma2 +=  cpf_verificador1.toString().charAt(i)*(11-i);
				};

				var verificador2 = soma2 % 11;

				if (verificador2 < 2) {
					verificador2 = 0;
				}else {
					verificador2 = 11 - verificador2;
				}

				cpf = cpf + "-" + verificador1 + verificador2;

				document.getElementById('CPF').innerHTML = cpf;
			}

			document.getElementById('valida-CPF').onsubmit = function validaCPF(){
				event.preventDefault() ;

				var cpf = document.getElementById('primeiros-digitos').value,
					verificadores = document.getElementById('digitos-verificadores').value,
					soma1 = null,
					soma2 = null;

				//Calculando o primeiro dígito verificador
				for (var i = 0; i < 9; ++i) {
					soma1 += cpf.toString().charAt(i)*(10-i);
				};

				var verificador1 = soma1 % 11;

				if (verificador1 < 2) {
					verificador1 = 0;
				}else {
					verificador1 = 11 - verificador1;
				}

				cpf_verificador1 = cpf + "" + verificador1;

				//Calculando o segundo dígito verificador
				for (var i = 0; i < 10; ++i){
					soma2 +=  cpf_verificador1.toString().charAt(i)*(11-i);
				};

				var verificador2 = soma2 % 11;

				if (verificador2 < 2) {
					verificador2 = 0;
				}else {
					verificador2 = 11 - verificador2;
				}

				if (verificadores.toString() == verificador1.toString() + verificador2.toString()) {
					alert('bateu');
				}else{
					alert('não');
				}

			}

		</script>
	</body>
</html>